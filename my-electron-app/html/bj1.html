<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>圆角阴影白色分栏</title>
    
    <link rel="stylesheet" href="styles/style.css" id="theme-link">
    <style>
 

        /* 图片 */
        .kl {
            display: block;
            width: 30%;
            margin: 20px auto;
            border-radius: 10px;
        }
        
      
    
    </style>
    <script src="js/zt.js"></script>
      <script src="js/tc.js"></script>
      <script src="js/ckkz.js"></script>
</head>

<body>
  <!-- pc-zhanyou -->
<div id="custom-title-bar">

        <span></span>
        <div id="window-controls">
            <button id="minimize">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <rect x="0" y="5" width="12" height="2" rx="1"/>
                </svg>
            </button>
            <button id="close">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 1L11 11M11 1L1 11" stroke="currentColor" stroke-width="1.5"/>
                </svg>
            </button>
        </div>
    </div>
<div class="zt">
     
        <div class="boxzj-fl">
    <div class="header-container">
                <button onclick="history.back()" class="fh-button">返回</button>
                <h1 id="v9">笔记</h1>
            </div>
    <textarea id="noteText" placeholder="在这里输入你的笔记..."></textarea>
    <br>
    <button onclick="saveNote()" class="buttonwhite">保存笔记</button>
    
    <div id="notesList"></div>
  </div>
<dialog id="ErrorDialog"class="ErrorDialog">
  <h1 style="color: #d90036;">错误</h1>
  <p style="color: #d90036;"></p>
  <button onclick="closeErrorDialog()"
            class="buttonred">关闭</button></dialog>

 <dialog id="SuccessDialog"
  <h1 style="color: #00b800;">成功</h1>
  <p style="color: #00b800;">笔记已保存！</p>
  <button onclick="closeSuccessDialog()"
            class="buttongreen">关闭</button></dialog>
 <script>
    // 笔记功能脚本（优化版）

    function open() {
   return "<p>" + a + "</p>"
    }


    function saveNote() {
      const noteText = document.getElementById('noteText').value.trim();
      if (!noteText) {
        var a = "笔记内容不能为空！";
        openErrorDialog();
        return;
        viewNotes();
      }

      const notes = JSON.parse(localStorage.getItem('notes') || '[]');
      notes.push({
        id: Date.now(),
        text: noteText,
        timestamp: new Date().toISOString()
      });

      localStorage.setItem('notes', JSON.stringify(notes));
      openSuccessDialog();
      viewNotes();
      document.getElementById('noteText').value = '';
    }

    function viewNotes() {
      const notesList = document.getElementById('notesList');
      const notes = JSON.parse(localStorage.getItem('notes') || '[]');
      
      if (notes.length === 0) {
        notesList.innerHTML = '';
        return;
      }

      notes.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
      notesList.innerHTML = notes.map(note => `
        <div class="note">
          <div class="box1-dm">
            <h2>${new Date(note.timestamp).toLocaleString()}</h2>
            <p>${note.text}</p>
            <button onclick="deleteNote('${note.id}')" class="buttonred">删除笔记</button>
          </div>
        </div>
      `).join('');
    }

    function deleteNote(noteId) {
      let notes = JSON.parse(localStorage.getItem('notes') || '[]');
      notes = notes.filter(note => note.id != noteId);
      localStorage.setItem('notes', JSON.stringify(notes));
      viewNotes();
    }

    window.onload = viewNotes;
  </script>
   <script>
    // 错误对话框相关函数
    function showErrorDialog(message) {
      const dialog = document.getElementById('ErrorDialog');
      if (dialog) {
        // 更新错误信息
        const errorContent = dialog.querySelector('p');
        if (errorContent) {
          errorContent.textContent = message;
        }
        dialog.showModal();
      }
    }
    
    function closeErrorDialog() {
      const dialog = document.getElementById('ErrorDialog');
      if (dialog) {
        dialog.close();
      }
    }
    
    // 成功对话框相关函数
    function openSuccessDialog() {
      const dialog = document.getElementById('SuccessDialog');
      if (dialog) {
        dialog.showModal();
      }
    }
    
    function closeSuccessDialog() {
      const dialog = document.getElementById('SuccessDialog');
      if (dialog) {
        dialog.close();
      }
    }
  </script>
 
</div>
</body>
</html>